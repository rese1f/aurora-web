function vdc_case() {
    var static_width = 700;
    var margin = {top: 30, right: 0, bottom: 10, left: 0};
    var image_size_width = static_width - margin.left - margin.right;

    var indicator_image_size = 132;
    var indicator_image_padding = 10;

    var base_dir = 'assets/vid/cases/';
    
    var indicator_data = [
        { id: 'vdc_1', opacity: 1.0, fontSize: '0.75em', title: '<b>[short caption] (26 words)</b> In this video, two smartphones are compared side by side as they launch and run the game \'Angry Birds 2\', showcasing their performance and loading times. <br> <b>[background caption] (65 words)</b> The video is set against a clean, white background that emphasizes the two smartphones placed side by side. The lighting is bright and even, creating a neutral atmosphere. The time displayed at the bottom of the screen counts up, indicating the duration of the gameplay. The environment is quiet, with no background noise, allowing the focus to remain on the visual performance of the devices. <br> <b>[main object caption] (85 words)</b> The main subjects are two smartphones, one on the left and one on the right, both displaying the game \'Angry Birds 2\'. The left phone shows a vibrant loading screen with colorful graphics, while the right phone initially displays a blank screen before transitioning to the game. The hands of the presenter are visible, interacting with the devices, tapping the screens to initiate the game. The presenter\'s fingers move swiftly, indicating a sense of urgency and excitement as they compare the responsiveness of both devices. <br> <b>[camera caption] (76 words)</b> The camera work is steady and focused, primarily using a medium shot that captures both smartphones in their entirety. The angle is slightly above the devices, providing a clear view of the screens and the presenter\'s hands. There are no significant camera movements; instead, the focus remains on the devices as they load the game. The video includes a timer overlay at the bottom, which counts the seconds, enhancing the comparative aspect of the performance test. <br> <b>[detailed caption] (609 words)</b> The video opens with a visually striking presentation of two smartphones positioned side by side against a pristine white background, which serves to enhance the focus on the devices themselves. The lighting is bright and evenly distributed, creating a neutral and distraction-free atmosphere that allows viewers to concentrate on the smartphones and their performance. Both devices prominently display the YouTube application interface, featuring a video titled “Dart Moon Collision,” which is highlighted as \"#1 ON TRENDING\" from the \"NASA.gov Video\" channel. Below the video pane, viewers can see the view counts and like/dislike statistics, along with a curated list of additional video suggestions at the bottom of the screens. A consistent timestamp of 6:12 PM is visible, adding a temporal context to the scene. A watermark logo is also present, likely indicating the content\'s publisher or owner, subtly reinforcing the source of the material being showcased.<br>As the video progresses, a hand enters the frame, reaching towards one of the smartphones, suggesting an imminent interaction while the visual content on the screens remains unchanged. This moment of anticipation quickly transitions into action as the YouTube interface is replaced by the home screens of both smartphones. The home screens reveal a variety of app icons, signaling a shift from video playback to a more general use interface. The hand gestures towards one device, indicating a forthcoming interaction that piques viewer interest.<br>The interaction becomes increasingly evident as both hands engage with the smartphones, demonstrating various functionalities through visible swiping motions. This segment highlights the responsiveness of the devices as the presenter explores their capabilities. A notable contrast emerges between the two smartphones; one appears to be turned off or in standby mode, while the other showcases a vibrant and possibly interactive application or game, marking a clear shift in focus and functionality.<br>As the demonstration continues, synchronicity is restored between the two devices, which now display identical colorful, animated images, likely from the same game or application. The hands are poised for further interaction, emphasizing the seamless experience across both smartphones. However, this visual harmony is briefly disrupted as distinct motion characteristics are displayed on each screen, suggesting a comparison of display prowess or application performance. Eventually, the visuals stabilize, revealing similar animated content featuring a tranquil landscape, further underscoring the capabilities of both devices.<br>The demonstration evolves into a more detailed showcase of a game interface or menu on both screens, which feature matching layouts. This segment highlights gameplay elements such as chests and character depots, effectively illustrating the smartphones\' ability to handle identical content without any noticeable lag or performance issues. The hands of the presenter continue to interact with the devices, tapping and swiping to navigate through the game, which adds a dynamic element to the comparison.<br>Throughout the video, the background remains consistently plain, with a stationary camera angle that captures both smartphones in their entirety. The camera work is steady and focused, primarily utilizing a medium shot that provides a clear view of the screens and the presenter’s hands. The angle is slightly elevated, allowing for an unobstructed view of the devices as they load the game. A timer overlay at the bottom of the screen counts the seconds, enhancing the comparative aspect of the performance test and adding a sense of urgency to the demonstration.<br>The overall sequence is characterized by hands-on interaction, smooth transitions between content, and a clear emphasis on comparing and demonstrating the software and possibly hardware capabilities of the smartphones. The combination of visual elements, engaging interactions, and a distraction-free environment creates a compelling narrative that effectively showcases the performance and features of the two devices in a side-by-side comparison.'},
        { id: 'vdc_2', opacity: 1.0, fontSize: '0.75em', title: '<b>[short caption] (25 words)</b> A young woman with curly hair engages with her laptop, transitioning from a focused expression to a smile, reflecting a journey of discovery or realization. <br> <b>[background caption] (70 words)</b> The setting is minimalistic, featuring a soft blue backdrop that creates a calm and serene atmosphere. The lighting is bright and even, enhancing the subject\'s features and the smooth surface of the laptop. There are no distracting elements in the background, allowing the viewer to focus entirely on the subject\'s expressions and actions. The environment is quiet, with a sense of stillness that emphasizes the woman\'s concentration and eventual joy. <br> <b>[main object caption] (93 words)</b> The main subject, a young woman with a voluminous curly hairstyle, is dressed in a light blue button-up shirt. Initially, her expression is serious and contemplative as she gazes intently at the laptop screen, her brow slightly furrowed. As she interacts with the device, her posture is slightly hunched forward, indicating focus and engagement. Gradually, her expression shifts to one of delight, with a smile breaking across her face, suggesting a positive revelation or achievement. Her fingers move deftly over the laptop\'s keyboard, showcasing her active participation in whatever task she is undertaking. <br> <b>[camera caption] (94words)</b> The camera employs a series of close-up shots that capture the subject\'s facial expressions and hand movements in detail. The angles are primarily frontal, allowing for a direct view of her engagement with the laptop. There are smooth transitions between shots, maintaining a fluid narrative flow. The focus shifts subtly between her face and the laptop screen, emphasizing the connection between her emotional responses and the content she is interacting with. The overall composition is clean, with a shallow depth of field that blurs the background slightly, keeping the viewer\'s attention on the subject. <br> <b>[detailed caption] (407 words)</b> The video presents a captivating scene featuring a young woman with voluminous, curly hair, elegantly styled and framing her face. She is dressed in a light blue collared shirt that complements her complexion and adds a touch of calmness to the overall aesthetic. The setting is minimalistic, with a soft blue backdrop that enhances the serene atmosphere, creating a tranquil environment conducive to concentration. The lighting is bright and even, illuminating her features and the sleek surface of the laptop she is holding, while ensuring that no distracting elements are present in the background. This simplicity allows the viewer to focus entirely on her expressions and actions, which are central to the narrative.<br>As the video unfolds, the woman maintains a consistent posture, initially appearing serious and contemplative as she gazes intently at the laptop screen. Her brow is slightly furrowed, indicating deep thought and engagement with the task at hand. She leans slightly forward, her body language reflecting her focus and determination. The camera captures her in a series of close-up shots, providing an intimate view of her facial expressions and hand movements. The angles are primarily frontal, allowing the audience to connect with her emotional journey as she interacts with the device.<br>Throughout the sequence, the woman\'s expression transitions from one of concentration to a radiant smile, suggesting a journey of discovery or realization. As she navigates through the content on her laptop, her fingers move deftly over the keyboard, showcasing her active participation and engagement with whatever task she is undertaking. The smooth transitions between shots maintain a fluid narrative flow, with the focus subtly shifting between her face and the laptop screen. This technique emphasizes the connection between her emotional responses and the content she is interacting with, drawing the viewer deeper into her experience.<br>The overall composition of the video is clean and visually appealing, with a shallow depth of field that blurs the background slightly, ensuring that the viewer\'s attention remains on the subject. The stillness of the environment enhances the sense of concentration, while the eventual shift in her expression to one of delight signifies a positive revelation or achievement. This moment of joy, captured in her smile, serves as a poignant reminder of the satisfaction that can come from engaging with technology and the discoveries it can facilitate. The video encapsulates a moment of introspection and triumph, inviting the viewer to share in the woman\'s journey as she navigates her digital landscape.'}
    ];

    var container = d3.select('#vdc_div')
        .append('svg')
        .attr('width', static_width)
        .attr('id', 'vdc_case_svg');

    var vdcvideo_overlay = d3.select('#vdcvideo_overlay');

    var indicator_group = container
        .append('g')
        .attr('id', 'indicator_group');

    function updateContainerHeight(height) {
        var total_height = height + margin.top + margin.bottom + indicator_image_size + 20;
        container
            .attr('height', total_height)
            .attr('viewBox', `0 0 ${static_width} ${total_height}`);
        
        indicator_group
            .attr('transform', `translate(${margin.left}, ${height + margin.top + 20})`);
    }

    function image_init() {
        // Main video
        vdcvideo_overlay.append('video')
            .attr('id', 'display_vdc_video1')
            .attr('width', image_size_width)
            .attr('controls', true)
            .append('source')
            .attr('type', 'video/mp4');

        // Title
        vdcvideo_overlay.append('div')
            .attr('id', 'display_vdc_video1_title')
            .style('text-align', 'justify')
            // .style('font-weight', 'bold')
            .style('margin-top', '8px')
            .style('text-justify', 'inter-word'); 

        vdcvideo_overlay.append('style')
            .text('#display_vdc_video1_title { line-height: 1.2; }');


        // Indicator videos
        indicator_group.selectAll('foreignObject')
            .data(indicator_data)
            .enter()
            .append('foreignObject')
            .attr('width', indicator_image_size)
            .attr('height', indicator_image_size)
            .attr('x', (d, i) => i * (indicator_image_size + indicator_image_padding))
            .attr('y', 0)
            .attr('opacity', d => d.opacity)
            .each(function(d) {
                d3.select(this)
                    .append('xhtml:video')
                    .attr('width', '100%')
                    .attr('height', '100%')
                    .attr('muted', true)
                    .attr('loop', true)
                    .attr('playsinline', true)
                    .append('source')
                    .attr('src', `${base_dir}${d.id}.mp4`)
                    .attr('type', 'video/mp4');
            })
            .on('click', select_new_video);
    }

    function select_new_video(event, d) {
        indicator_group.selectAll('foreignObject')
            .attr('opacity', item => item.id === d.id ? 1.0 : 0.2);
        
        var video = d3.select('#display_vdc_video1');
        var source = video.select('source');
        
        source.attr('src', `${base_dir}${d.id}.mp4`)
        video.node().load(); // Force the video to load
        
        d3.select('#display_vdc_video1_title')
            .html(`<span style="font-size: ${d.fontSize};">${d.title}</span>`);

        video.on('loadedmetadata', function() {
            var aspect_ratio = this.videoHeight / this.videoWidth;
            var new_height = image_size_width * aspect_ratio;
            
            video.attr('height', new_height);
            
            // updateContainerHeight(new_height);
        });

        // Play all indicator videos
        // indicator_group.selectAll('video').each(function() {
        //     this.play().catch(e => console.log("Autoplay prevented:", e));
        // });
    }

    function displayIndicatorData(data) {
        console.log('displayIndicatorData called with', data);
        data.forEach(item => {
            const element = document.getElementById(item.id);
            if (element) {
                element.style.opacity = item.opacity;
                const titleElement = element.querySelector('.title'); // Assuming there's a class 'title' for the title element
                if (titleElement) {
                    titleElement.textContent = item.title;
                    titleElement.style.fontSize = item.fontSize;
                    titleElement.style.lineHeight = item.lineHeight;

                }
            }
        });
    }

    displayIndicatorData(indicator_data);

    image_init();
    select_new_video(null, indicator_data[0]);
}

vdc_case();